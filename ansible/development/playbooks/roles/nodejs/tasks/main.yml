---
# tasks file for nodejs-latest

- name: Add NodeSource repository for Node.js version {{ node_version }}
  ansible.legacy.shell: "curl -fsSL https://deb.nodesource.com/setup_{{ node_version }}.x | bash -"

- name: Install Node.js
  ansible.builtin.apt:
    name: nodejs
    state: present

- name: Change to project directory and run npm install
  command: npm install
  args:
    chdir: "{{ remote_project_folder }}"
    
- name: Change to project directory and install PM2
  command: npm install pm2 -g
  args:
    chdir: "{{ remote_project_folder }}"
    